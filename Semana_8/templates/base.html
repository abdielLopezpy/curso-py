<!DOCTYPE html>
<html lang="es">
<head>
    {# ========================================================================
       METADATOS Y CONFIGURACIÓN
       ========================================================================
       Estos tags son esenciales para que la página funcione correctamente.
       ======================================================================== #}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# ------------------------------------------------------------------------
       TÍTULO DE LA PÁGINA
       ------------------------------------------------------------------------
       Cada página puede definir su propio título usando:
       {% block title %}Mi Título{% endblock %}

       Si no se define, usa el título por defecto.
       ------------------------------------------------------------------------ #}
    <title>{% block title %}Semana 8 - Flask + Neon{% endblock %}</title>

    {# ------------------------------------------------------------------------
       ESTILOS CSS
       ------------------------------------------------------------------------
       Usamos url_for('static', filename='...') para generar la URL correcta
       al archivo CSS. Esto funciona sin importar dónde esté desplegada la app.
       ------------------------------------------------------------------------ #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    {# ------------------------------------------------------------------------
       BLOQUE PARA CSS ADICIONAL
       ------------------------------------------------------------------------
       Las páginas hijas pueden agregar CSS adicional:
       {% block extra_css %}
       <style>
           .mi-estilo { color: red; }
       </style>
       {% endblock %}
       ------------------------------------------------------------------------ #}
    {% block extra_css %}{% endblock %}
</head>
<body>
    {# ========================================================================
       NAVEGACIÓN
       ========================================================================
       La barra de navegación es igual en todas las páginas.
       Usa las clases CSS definidas en styles.css:
       - .navbar: contenedor principal
       - .navbar-brand: logo/nombre de la app
       - .navbar-menu: contenedor de enlaces
       ======================================================================== #}
    <nav class="navbar">
        {# Logo/Nombre de la aplicación #}
        <a href="{{ url_for('index') }}" class="navbar-brand">
            Semana 8 - Flask + Neon
        </a>

        {# Menú de navegación #}
        <div class="navbar-menu">
            <a href="{{ url_for('index') }}">Inicio</a>
            <a href="{{ url_for('listar_categorias') }}">Categorías</a>
            <a href="{{ url_for('listar_productos') }}">Productos</a>
        </div>
    </nav>

    {# ========================================================================
       CONTENIDO PRINCIPAL
       ========================================================================
       Todo el contenido va dentro de .container para mantener un ancho
       máximo y centrado en la página.
       ======================================================================== #}
    <main class="container">

        {# --------------------------------------------------------------------
           MENSAJES FLASH
           --------------------------------------------------------------------
           Flask tiene un sistema de mensajes "flash" para mostrar
           notificaciones al usuario después de una acción.

           En Python:
           flash('Mensaje exitoso', 'success')
           flash('Hubo un error', 'danger')

           Categorías disponibles:
           - success: verde (operación exitosa)
           - danger: rojo (error)
           - warning: amarillo (advertencia)
           - info: azul (información)
           -------------------------------------------------------------------- #}
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {# --------------------------------------------------------------------
           BLOQUE DE CONTENIDO
           --------------------------------------------------------------------
           Este es el bloque principal donde cada página pone su contenido.

           En las páginas hijas:
           {% extends "base.html" %}

           {% block content %}
           <h1>Mi página</h1>
           <p>Mi contenido...</p>
           {% endblock %}
           -------------------------------------------------------------------- #}
        {% block content %}
        {# Contenido por defecto si la página no define nada #}
        <p>Bienvenido a la aplicación</p>
        {% endblock %}

    </main>

    {# ========================================================================
       FOOTER
       ========================================================================
       El pie de página es igual en todas las páginas.
       ======================================================================== #}
    <footer class="footer">
        <p>Semana 8 - Curso de Python | Flask + Neon (PostgreSQL)</p>
    </footer>

    {# ========================================================================
       JAVASCRIPT
       ======================================================================== #}

    {# ------------------------------------------------------------------------
       BLOQUE PARA JS ADICIONAL
       ------------------------------------------------------------------------
       Las páginas hijas pueden agregar JavaScript:
       {% block extra_js %}
       <script>
           console.log('Mi script');
       </script>
       {% endblock %}
       ------------------------------------------------------------------------ #}
    {% block extra_js %}{% endblock %}
</body>
</html>


{# ============================================================================
   GUÍA RÁPIDA DE JINJA2
   ============================================================================

   MOSTRAR VARIABLES:
   {{ variable }}
   {{ objeto.atributo }}
   {{ lista[0] }}

   CONDICIONALES:
   {% if condicion %}
       ...
   {% elif otra_condicion %}
       ...
   {% else %}
       ...
   {% endif %}

   BUCLES:
   {% for item in lista %}
       {{ item.nombre }}
   {% else %}
       No hay items
   {% endfor %}

   FILTROS:
   {{ texto | upper }}         -> MAYÚSCULAS
   {{ texto | lower }}         -> minúsculas
   {{ numero | round(2) }}     -> Redondear a 2 decimales
   {{ lista | length }}        -> Cantidad de elementos
   {{ texto | default('N/A') }} -> Valor por defecto

   HERENCIA:
   {% extends "base.html" %}   -> Heredar de otra plantilla
   {% block nombre %}...{% endblock %} -> Definir/sobrescribir bloque

   URLs:
   {{ url_for('nombre_funcion') }}
   {{ url_for('nombre_funcion', id=5) }}
   {{ url_for('static', filename='css/styles.css') }}

   INCLUIR OTRAS PLANTILLAS:
   {% include '_parcial.html' %}

   MACROS (componentes):
   {% from "macros.html" import campo_texto, boton %}
   {{ campo_texto('nombre', 'Nombre', required=true) }}

   Ver GUIA_JINJA2.md para documentación completa.

   ============================================================================ #}
