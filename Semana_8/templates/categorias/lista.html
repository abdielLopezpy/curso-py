{# ============================================================================
   LISTA DE CATEGORÍAS
   ============================================================================
   Muestra todas las categorías en una tabla.
   ============================================================================ #}

{% extends "base.html" %}
{% from "macros.html" import page_header, badge_estado, acciones_tabla, empty_state %}

{% block title %}Categorías - Flask + Neon{% endblock %}

{% block content %}

{{ page_header('Categorías', url_for('crear_categoria'), '+ Nueva Categoría') }}

{% if categorias %}
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Productos</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for categoria in categorias %}
                <tr>
                    <td>{{ categoria.id }}</td>
                    <td>
                        <a href="{{ url_for('ver_categoria', id=categoria.id) }}">
                            {{ categoria.nombre }}
                        </a>
                    </td>
                    <td>{{ categoria.descripcion | truncate(50) if categoria.descripcion else '-' }}</td>
                    <td>{{ categoria.cantidad_productos }}</td>
                    <td>{{ badge_estado(categoria.activa) }}</td>
                    <td>
                        {{ acciones_tabla(
                            url_for('editar_categoria', id=categoria.id),
                            url_for('eliminar_categoria', id=categoria.id),
                            confirmar='¿Eliminar la categoría "' ~ categoria.nombre ~ '" y todos sus productos?'
                        ) }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    {{ empty_state('No hay categorías registradas', url_for('crear_categoria'), 'Crear primera categoría') }}
{% endif %}

{% endblock %}
