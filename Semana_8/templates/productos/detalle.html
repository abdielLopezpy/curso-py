{# ============================================================================
   DETALLE DE PRODUCTO
   ============================================================================
   Muestra toda la información de un producto específico.

   DATOS RECIBIDOS DESDE PYTHON:
   - producto: objeto Producto con todos sus atributos

   PARA CREAR UNA PÁGINA DE DETALLE SIMILAR:
   1. Copia este archivo a templates/tu_entidad/detalle.html
   2. Cambia los campos que se muestran
   3. Actualiza las URLs
   ============================================================================ #}

{% extends "base.html" %}

{# Importar macros #}
{% from "macros.html" import badge_estado, badge_stock, boton, boton_eliminar %}

{% block title %}{{ producto.nombre }} - Flask + Neon{% endblock %}

{% block content %}

{# ============================================================================
   TARJETA DE DETALLE
   ============================================================================ #}
<div class="card">
    {# ------------------------------------------------------------------------
       ENCABEZADO
       ------------------------------------------------------------------------ #}
    <div class="card-header">
        <h1 class="card-title">{{ producto.nombre }}</h1>
        {{ badge_estado(producto.activo) }}
    </div>

    {# ------------------------------------------------------------------------
       CUERPO - Información del producto
       ------------------------------------------------------------------------ #}
    <div class="card-body">
        <div class="grid-2">
            {# Columna izquierda: Descripción #}
            <div>
                <p><strong>Descripción:</strong></p>
                <p class="text-muted">
                    {{ producto.descripcion or 'Sin descripción' }}
                </p>
            </div>

            {# Columna derecha: Detalles #}
            <div>
                <p>
                    <strong>Precio:</strong>
                    <span style="font-size: 1.5em; color: var(--color-success);">
                        ${{ producto.precio | round(2) }}
                    </span>
                </p>

                <p>
                    <strong>Stock:</strong>
                    {{ badge_stock(producto.stock) }}
                    {% if producto.stock > 0 %}
                        unidades
                    {% endif %}
                </p>

                <p>
                    <strong>Categoría:</strong>
                    {% if producto.categoria %}
                        <a href="{{ url_for('ver_categoria', id=producto.categoria.id) }}">
                            {{ producto.categoria.nombre }}
                        </a>
                    {% else %}
                        <span class="text-muted">Sin categoría</span>
                    {% endif %}
                </p>

                <p>
                    <strong>Fecha de creación:</strong>
                    <span class="text-muted">
                        {{ producto.fecha_creacion.strftime('%d/%m/%Y %H:%M') if producto.fecha_creacion else 'N/A' }}
                    </span>
                </p>
            </div>
        </div>
    </div>

    {# ------------------------------------------------------------------------
       PIE - Acciones
       ------------------------------------------------------------------------ #}
    <div class="card-footer">
        <div class="btn-group">
            {{ boton('Editar', 'primary', url=url_for('editar_producto', id=producto.id)) }}
            {{ boton_eliminar(
                url_for('eliminar_producto', id=producto.id),
                mensaje='¿Eliminar el producto "' ~ producto.nombre ~ '"?'
            ) }}
            {{ boton('Volver a la lista', 'secondary', url=url_for('listar_productos')) }}
        </div>
    </div>
</div>

{% endblock %}
